{"ast":null,"code":"import { resetPlaylistStore } from \"./playlistActions\";\nimport { resetSongStore } from \"./songActions\";\nimport { deleteSearchResults } from \"./searchActions\";\nexport const loginUser = user => {\n  return {\n    type: \"LOGIN_USER\",\n    user\n  };\n};\nexport const logoutUser = () => {\n  return {\n    type: \"LOGOUT_USER\"\n  };\n};\nexport const fetchUser = () => {\n  return dispatch => {\n    dispatch({\n      type: 'LOADING_USER'\n    });\n    fetch('http://localhost:3001/logged_in', {\n      credentials: 'include'\n    }).then(response => response.json()).then(json => {\n      debugger;\n\n      if (json.user.isLoggedIn) {\n        dispatch(resetPlaylistStore(json.playlists)); // First clear playlist store (this is necessary when user logs out or during multiple redirects, such as if user manually enters incorrect playlistId url param\n        // dispatch(resetPlaylistStore(json.playlists))\n        // Then add playlists from the server to the store\n        // for (const playlist of json.playlists) dispatch(addPlaylist(playlist))\n\n        dispatch(resetSongStore(json.songs));\n        dispatch(deleteSearchResults);\n      } // Must keep below for loop (otherwise, for loop will occur after authPlaylist, resulting in an undesired redirect)\n\n\n      dispatch(loginUser(json.user));\n    });\n  };\n};","map":{"version":3,"sources":["/Users/Alexander/Documents/Coding/Flatiron School/3_Projects/spotify_playlister/spotify-playlister-frontend/src/actions/userActions.js"],"names":["resetPlaylistStore","resetSongStore","deleteSearchResults","loginUser","user","type","logoutUser","fetchUser","dispatch","fetch","credentials","then","response","json","isLoggedIn","playlists","songs"],"mappings":"AAAA,SAASA,kBAAT,QAAmC,mBAAnC;AACA,SAASC,cAAT,QAA+B,eAA/B;AACA,SAASC,mBAAT,QAAoC,iBAApC;AAEA,OAAO,MAAMC,SAAS,GAAGC,IAAI,IAAI;AAC7B,SAAO;AAAEC,IAAAA,IAAI,EAAE,YAAR;AAAsBD,IAAAA;AAAtB,GAAP;AACH,CAFM;AAIP,OAAO,MAAME,UAAU,GAAG,MAAM;AAC5B,SAAO;AAAED,IAAAA,IAAI,EAAE;AAAR,GAAP;AACH,CAFM;AAIP,OAAO,MAAME,SAAS,GAAG,MAAM;AAC3B,SAAOC,QAAQ,IAAI;AACfA,IAAAA,QAAQ,CAAC;AAACH,MAAAA,IAAI,EAAE;AAAP,KAAD,CAAR;AACAI,IAAAA,KAAK,CAAC,iCAAD,EAAoC;AAAEC,MAAAA,WAAW,EAAE;AAAf,KAApC,CAAL,CACCC,IADD,CACMC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EADlB,EAECF,IAFD,CAEME,IAAI,IAAI;AACV;;AACA,UAAIA,IAAI,CAACT,IAAL,CAAUU,UAAd,EAA0B;AACtBN,QAAAA,QAAQ,CAACR,kBAAkB,CAACa,IAAI,CAACE,SAAN,CAAnB,CAAR,CADsB,CAEtB;AACA;AACA;AACA;;AACAP,QAAAA,QAAQ,CAACP,cAAc,CAACY,IAAI,CAACG,KAAN,CAAf,CAAR;AACAR,QAAAA,QAAQ,CAACN,mBAAD,CAAR;AACH,OAVS,CAYV;;;AACAM,MAAAA,QAAQ,CAACL,SAAS,CAACU,IAAI,CAACT,IAAN,CAAV,CAAR;AACH,KAhBD;AAiBH,GAnBD;AAoBH,CArBM","sourcesContent":["import { resetPlaylistStore } from \"./playlistActions\"\nimport { resetSongStore } from \"./songActions\"\nimport { deleteSearchResults } from \"./searchActions\"\n\nexport const loginUser = user => {\n    return { type: \"LOGIN_USER\", user }\n}\n\nexport const logoutUser = () => {\n    return { type: \"LOGOUT_USER\" }\n}\n\nexport const fetchUser = () => {\n    return dispatch => {\n        dispatch({type: 'LOADING_USER'});   \n        fetch('http://localhost:3001/logged_in', { credentials: 'include' })\n        .then(response => response.json())\n        .then(json => {\n            debugger\n            if (json.user.isLoggedIn) {\n                dispatch(resetPlaylistStore(json.playlists))\n                // First clear playlist store (this is necessary when user logs out or during multiple redirects, such as if user manually enters incorrect playlistId url param\n                // dispatch(resetPlaylistStore(json.playlists))\n                // Then add playlists from the server to the store\n                // for (const playlist of json.playlists) dispatch(addPlaylist(playlist))\n                dispatch(resetSongStore(json.songs))\n                dispatch(deleteSearchResults)\n            }\n\n            // Must keep below for loop (otherwise, for loop will occur after authPlaylist, resulting in an undesired redirect)\n            dispatch(loginUser(json.user))\n        })\n    }\n}"]},"metadata":{},"sourceType":"module"}