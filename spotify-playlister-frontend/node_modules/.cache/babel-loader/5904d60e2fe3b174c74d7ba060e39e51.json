{"ast":null,"code":"var _jsxFileName = \"/Users/Alexander/Documents/Coding/Flatiron School/3_Projects/spotify_playlister/spotify-playlister-frontend/src/components/songs/Song.js\";\nimport React from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Song = ({\n  playlistSong,\n  match,\n  updateSong\n}) => {\n  const handleClick = () => {\n    const configObj = {\n      method: 'PUT',\n      headers: {\n        'Content-type': 'application/json; charset=UTF-8'\n      },\n      credentials: 'include'\n    };\n    fetch(`http://localhost:3001${match.url}/${playlistSong.id}`, configObj).then(response => response.json()) // TODO: Revise below code + destroy song in controller so that you are removing the playlist id from playlistIds/playlist_song and not actually removing the song\n    .then(json => {\n      if (!json.errors) {\n        const {\n          playlistIds\n        } = playlistSong;\n        const index = playlistIds.indexOf(parseInt(match.params.playlistId, 10));\n        if (index > -1) playlistIds.splice(index, 1);\n        updateSong(playlistSong);\n      } else {\n        alert(json.errors.join(\"\\n\"));\n      }\n    }).catch(error => console.log('API errors:', error));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Song: \", /*#__PURE__*/_jsxDEV(\"a\", {\n        target: \"_blank\",\n        rel: \"noopener noreferrer\",\n        href: playlistSong.url,\n        children: playlistSong.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 22\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Album: \", playlistSong.album_name]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Artists: \", JSON.parse(playlistSong.artists).join(', ')]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleClick,\n      children: \" X \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 13\n    }, this)]\n  }, playlistSong.id, true, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 9\n  }, this);\n};\n\n_c = Song;\nexport default Song;\n\nvar _c;\n\n$RefreshReg$(_c, \"Song\");","map":{"version":3,"sources":["/Users/Alexander/Documents/Coding/Flatiron School/3_Projects/spotify_playlister/spotify-playlister-frontend/src/components/songs/Song.js"],"names":["React","Song","playlistSong","match","updateSong","handleClick","configObj","method","headers","credentials","fetch","url","id","then","response","json","errors","playlistIds","index","indexOf","parseInt","params","playlistId","splice","alert","join","catch","error","console","log","title","album_name","JSON","parse","artists"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;;;AAEA,MAAMC,IAAI,GAAG,CAAC;AAACC,EAAAA,YAAD;AAAeC,EAAAA,KAAf;AAAsBC,EAAAA;AAAtB,CAAD,KAAuC;AAEhD,QAAMC,WAAW,GAAG,MAAM;AAEtB,UAAMC,SAAS,GAAG;AACdC,MAAAA,MAAM,EAAE,KADM;AAEdC,MAAAA,OAAO,EAAE;AAAC,wBAAgB;AAAjB,OAFK;AAGdC,MAAAA,WAAW,EAAE;AAHC,KAAlB;AAMAC,IAAAA,KAAK,CAAE,wBAAuBP,KAAK,CAACQ,GAAI,IAAGT,YAAY,CAACU,EAAG,EAAtD,EAAyDN,SAAzD,CAAL,CACKO,IADL,CACUC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EADtB,EAEI;AAFJ,KAGKF,IAHL,CAGUE,IAAI,IAAI;AACV,UAAI,CAACA,IAAI,CAACC,MAAV,EAAkB;AACd,cAAM;AAAEC,UAAAA;AAAF,YAAkBf,YAAxB;AACA,cAAMgB,KAAK,GAAGD,WAAW,CAACE,OAAZ,CAAoBC,QAAQ,CAACjB,KAAK,CAACkB,MAAN,CAAaC,UAAd,EAA0B,EAA1B,CAA5B,CAAd;AACA,YAAIJ,KAAK,GAAG,CAAC,CAAb,EAAgBD,WAAW,CAACM,MAAZ,CAAmBL,KAAnB,EAA0B,CAA1B;AAChBd,QAAAA,UAAU,CAACF,YAAD,CAAV;AAEH,OAND,MAMO;AACHsB,QAAAA,KAAK,CAACT,IAAI,CAACC,MAAL,CAAYS,IAAZ,CAAiB,IAAjB,CAAD,CAAL;AACH;AACJ,KAbL,EAcKC,KAdL,CAcWC,KAAK,IAAIC,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BF,KAA3B,CAdpB;AAeH,GAvBD;;AAyBA,sBACI;AAAA,4BACI;AAAA,wCAAS;AAAG,QAAA,MAAM,EAAC,QAAV;AAAmB,QAAA,GAAG,EAAC,qBAAvB;AAA6C,QAAA,IAAI,EAAEzB,YAAY,CAACS,GAAhE;AAAA,kBAAsET,YAAY,CAAC4B;AAAnF;AAAA;AAAA;AAAA;AAAA,cAAT;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,eAEI;AAAA,4BAAW5B,YAAY,CAAC6B,UAAxB;AAAA;AAAA;AAAA;AAAA;AAAA,YAFJ,eAGI;AAAA,8BAAaC,IAAI,CAACC,KAAL,CAAW/B,YAAY,CAACgC,OAAxB,EAAiCT,IAAjC,CAAsC,IAAtC,CAAb;AAAA;AAAA;AAAA;AAAA;AAAA,YAHJ,eAII;AAAQ,MAAA,OAAO,EAAEpB,WAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAJJ;AAAA,KAAUH,YAAY,CAACU,EAAvB;AAAA;AAAA;AAAA;AAAA,UADJ;AAQD,CAnCH;;KAAMX,I;AAqCN,eAAeA,IAAf","sourcesContent":["import React from 'react';\n\nconst Song = ({playlistSong, match, updateSong}) => {\n    \n    const handleClick = () => {\n\n        const configObj = {\n            method: 'PUT',\n            headers: {'Content-type': 'application/json; charset=UTF-8'},\n            credentials: 'include'\n        }\n\n        fetch(`http://localhost:3001${match.url}/${playlistSong.id}`, configObj)   \n            .then(response => response.json())\n            // TODO: Revise below code + destroy song in controller so that you are removing the playlist id from playlistIds/playlist_song and not actually removing the song\n            .then(json => {\n                if (!json.errors) {\n                    const { playlistIds } = playlistSong\n                    const index = playlistIds.indexOf(parseInt(match.params.playlistId, 10))\n                    if (index > -1) playlistIds.splice(index, 1)\n                    updateSong(playlistSong)\n\n                } else {\n                    alert(json.errors.join(\"\\n\"))\n                } \n            })\n            .catch(error => console.log('API errors:', error))\n    }\n\n    return (\n        <div key={playlistSong.id}>\n            <p>Song: <a target=\"_blank\" rel=\"noopener noreferrer\" href={playlistSong.url}>{playlistSong.title}</a></p>\n            <p>Album: {playlistSong.album_name}</p>\n            <p>Artists: {JSON.parse(playlistSong.artists).join(', ')}</p>\n            <button onClick={handleClick} > X </button>\n        </div>\n    );\n  }\n \nexport default Song;"]},"metadata":{},"sourceType":"module"}